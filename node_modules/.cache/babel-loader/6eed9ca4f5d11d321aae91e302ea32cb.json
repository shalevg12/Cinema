{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/macbook/Downloads/NewCinema/src/pages/Admin/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addProductStart, fetchProductsStart, deleteProductStart } from './../../Redux/Products/products.actions';\nimport Modal from './../../components/Modal';\nimport FormInput from './../../components/forms/FormInput';\nimport FormSelect from './../../components/forms/FormSelect';\nimport Button from './../../components/forms/Button';\nimport LoadMore from './../../components/LoadMore';\nimport CKEditor from 'ckeditor4-react';\nimport './styles.scss';\n\nconst mapState = ({\n  productsData\n}) => ({\n  products: productsData.products\n});\n\nconst Admin = props => {\n  _s();\n\n  const {\n    products\n  } = useSelector(mapState);\n  const dispatch = useDispatch();\n  const [hideModal, setHideModal] = useState(true);\n  const [productCategory, setProductCategory] = useState('Horror');\n  const [productName, setProductName] = useState('');\n  const [productThumbnail, setProductThumbnail] = useState('');\n  const [productPrice, setProductPrice] = useState(0);\n  const [productDesc, setProductDesc] = useState('');\n  const {\n    data,\n    queryDoc,\n    isLastPage\n  } = products;\n  useEffect(() => {\n    dispatch(fetchProductsStart());\n  }, []);\n\n  const toggleModal = () => setHideModal(!hideModal);\n\n  const configModal = {\n    hideModal,\n    toggleModal\n  };\n\n  const resetForm = () => {\n    setHideModal(true);\n    setProductCategory('Horror');\n    setProductName('');\n    setProductThumbnail('');\n    setProductPrice(0);\n    setProductDesc('');\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    dispatch(addProductStart({\n      productCategory,\n      productName,\n      productThumbnail,\n      productPrice,\n      productDesc\n    }));\n    resetForm();\n  };\n\n  const handleLoadMore = () => {\n    dispatch(fetchProductsStart({\n      startAfterDoc: queryDoc,\n      persistProducts: data\n    }));\n  };\n\n  const configLoadMore = {\n    onLoadMoreEvt: handleLoadMore\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"callToActions\",\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => toggleModal(),\n            children: \"Add New Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, { ...configModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addNewProductForm\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Add new movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormSelect, {\n            label: \"Category\",\n            options: [{\n              value: \"Horror\",\n              name: \"Horror\"\n            }, {\n              value: \"Comedy\",\n              name: \"Comedy\"\n            }],\n            handleChange: e => setProductCategory(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Name\",\n            type: \"text\",\n            value: productName,\n            handleChange: e => setProductName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Main image URL\",\n            type: \"url\",\n            value: productThumbnail,\n            handleChange: e => setProductThumbnail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n            label: \"Price\",\n            type: \"number\",\n            min: \"0.00\",\n            max: \"10000.00\",\n            step: \"0.01\",\n            value: productPrice,\n            handleChange: e => setProductPrice(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CKEditor, {\n            onChange: evt => setProductDesc(evt.editor.getData())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            children: \"Add Movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"manageProducts\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        border: \"0\",\n        cellPadding: \"0\",\n        cellSpacing: \"0\",\n        children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"th\", {\n              children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                children: \"Manage Movies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"results\",\n                border: \"0\",\n                cellPadding: \"10\",\n                cellSpacing: \"0\",\n                children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: Array.isArray(data) && data.length > 0 && data.map((product, index) => {\n                    const {\n                      productName,\n                      productThumbnail,\n                      productPrice,\n                      documentID\n                    } = product;\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          className: \"thumb\",\n                          src: productThumbnail\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 176,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: productName\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [\"\\xA3\", productPrice]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 181,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          onClick: () => dispatch(deleteProductStart(documentID)),\n                          children: \"Delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 185,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 184,\n                        columnNumber: 27\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 25\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                border: \"0\",\n                cellPadding: \"10\",\n                cellSpacing: \"0\",\n                children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: !isLastPage && /*#__PURE__*/_jsxDEV(LoadMore, { ...configLoadMore\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Admin, \"GBcnw9lYd6WbujhNZj7P79MjzqU=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = Admin;\nexport default Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"sources":["/Users/macbook/Downloads/NewCinema/src/pages/Admin/index.js"],"names":["React","useState","useEffect","useDispatch","useSelector","addProductStart","fetchProductsStart","deleteProductStart","Modal","FormInput","FormSelect","Button","LoadMore","CKEditor","mapState","productsData","products","Admin","props","dispatch","hideModal","setHideModal","productCategory","setProductCategory","productName","setProductName","productThumbnail","setProductThumbnail","productPrice","setProductPrice","productDesc","setProductDesc","data","queryDoc","isLastPage","toggleModal","configModal","resetForm","handleSubmit","e","preventDefault","handleLoadMore","startAfterDoc","persistProducts","configLoadMore","onLoadMoreEvt","value","name","target","evt","editor","getData","Array","isArray","length","map","product","index","documentID"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addProductStart, fetchProductsStart, deleteProductStart } from './../../Redux/Products/products.actions';\nimport Modal from './../../components/Modal';\nimport FormInput from './../../components/forms/FormInput';\nimport FormSelect from './../../components/forms/FormSelect';\nimport Button from './../../components/forms/Button';\nimport LoadMore from './../../components/LoadMore';\nimport CKEditor from 'ckeditor4-react';\nimport './styles.scss';\n\nconst mapState = ({ productsData }) => ({\n  products: productsData.products\n});\n\nconst Admin = props => {\n  const { products } = useSelector(mapState);\n  const dispatch = useDispatch();\n  const [hideModal, setHideModal] = useState(true);\n  const [productCategory, setProductCategory] = useState('Horror');\n  const [productName, setProductName] = useState('');\n  const [productThumbnail, setProductThumbnail] = useState('');\n  const [productPrice, setProductPrice] = useState(0);\n  const [productDesc, setProductDesc] = useState('');\n\n  const { data, queryDoc, isLastPage } = products;\n\n  useEffect(() => {\n    dispatch(\n      fetchProductsStart()\n    );\n  }, []);\n\n  const toggleModal = () => setHideModal(!hideModal);\n\n  const configModal = {\n    hideModal,\n    toggleModal\n  };\n\n  const resetForm = () => {\n    setHideModal(true);\n    setProductCategory('Horror');\n    setProductName('');\n    setProductThumbnail('');\n    setProductPrice(0);\n    setProductDesc('');\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    dispatch(\n      addProductStart({\n        productCategory,\n        productName,\n        productThumbnail,\n        productPrice,\n        productDesc,\n      })\n    );\n    resetForm();\n\n  };\n\n  const handleLoadMore = () => {\n    dispatch(\n      fetchProductsStart({\n        startAfterDoc: queryDoc,\n        persistProducts: data\n      })\n    );\n  };\n\n  const configLoadMore = {\n    onLoadMoreEvt: handleLoadMore,\n  };\n\n  return (\n    <div className=\"admin\">\n\n      <div className=\"callToActions\">\n        <ul>\n          <li>\n            <Button onClick={() => toggleModal()}>\n              Add New Movie\n            </Button>\n          </li>\n        </ul>\n      </div>\n\n      <Modal {...configModal}>\n        <div className=\"addNewProductForm\">\n          <form onSubmit={handleSubmit}>\n\n            <h2>\n              Add new movie\n            </h2>\n\n            <FormSelect\n              label=\"Category\"\n              options={[{\n                value: \"Horror\",\n                name: \"Horror\"\n              }, {\n                value: \"Comedy\",\n                name: \"Comedy\"\n              }]}\n              handleChange={e => setProductCategory(e.target.value)}\n            />\n\n            <FormInput\n              label=\"Name\"\n              type=\"text\"\n              value={productName}\n              handleChange={e => setProductName(e.target.value)}\n            />\n\n            <FormInput\n              label=\"Main image URL\"\n              type=\"url\"\n              value={productThumbnail}\n              handleChange={e => setProductThumbnail(e.target.value)}\n            />\n\n            <FormInput\n              label=\"Price\"\n              type=\"number\"\n              min=\"0.00\"\n              max=\"10000.00\"\n              step=\"0.01\"\n              value={productPrice}\n              handleChange={e => setProductPrice(e.target.value)}\n            />\n\n            <CKEditor\n              onChange={evt => setProductDesc(evt.editor.getData())}\n            />\n\n            <br />\n\n            <Button type=\"submit\">\n              Add Movie\n            </Button>\n\n          </form>\n        </div>\n      </Modal>\n\n      <div className=\"manageProducts\">\n\n        <table border=\"0\" cellPadding=\"0\" cellSpacing=\"0\">\n          <tbody>\n            <tr>\n              <th>\n                <h1>\n                  Manage Movies\n                </h1>\n              </th>\n            </tr>\n            <tr>\n              <td>\n                <table className=\"results\" border=\"0\" cellPadding=\"10\" cellSpacing=\"0\">\n                  <tbody>\n                    {(Array.isArray(data) && data.length > 0) && data.map((product, index) => {\n                      const {\n                        productName,\n                        productThumbnail,\n                        productPrice,\n                        documentID\n                      } = product;\n\n                      return (\n                        <tr key={index}>\n                          <td>\n                            <img className=\"thumb\" src={productThumbnail} />\n                          </td>\n                          <td>\n                            {productName}\n                          </td>\n                          <td>\n                            £{productPrice}\n                          </td>\n                          <td>\n                            <Button onClick={() => dispatch(deleteProductStart(documentID))}>\n                              Delete\n                            </Button>\n                          </td>\n                        </tr>\n                      )\n                    })}\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n            <tr>\n              <td>\n\n              </td>\n            </tr>\n            <tr>\n              <td>\n                <table border=\"0\" cellPadding=\"10\" cellSpacing=\"0\">\n                  <tbody>\n                    <tr>\n                      <td>\n                        {!isLastPage && (\n                          <LoadMore {...configLoadMore} />\n                        )}\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n      </div>\n\n    </div>\n  );\n}\n\nexport default Admin;"]},"metadata":{},"sourceType":"module"}